{% extends "base.html" %} 

{% block content %}

<div class="post">
    <div class="blog-head">
        <div class="blog-title">Title: {{post.title}}
        </div>
        <div class="blog-created">Created: {{post.created.strftime("%d %b %Y")}}
        </div>
        <div class="blog-authored">Author: {{post.author}}
        </div>
    </div>
    <div class="blog-content">
        {{post.blogPost}}
    </div>

    <div class="comments__wrapper">
        <div class="comments__header">
            <h3>Comments</h3>
        </div>
    
    {% for comment in comments %}
        <div class="comment__commentator">
            <h4>Comment by: {{comment.commentator}}</h4>
            <div class="comment__created">Commented on: {{comment.comment_date.strftime("%d %b %Y")}}
            </div>
            <p class="comment__text">{{comment.comment}}</p>
        </div>
    </div>
        
    {% endfor %}

    <div class="blog-buttons">

        {# Author section #}
        {% if username == post.author %}
        
        <a href="/comment/{{post.key.integer_id()}}">Comment <i class="fa fa-comment" aria-hidden="true"></i></a>
        
        <div class="test">
        <p>this is a test to see what value the like query returns:</p>
        <br>
        <p>{{likes}}</p>
        <br>
        <p>Filter: {{likes.like_count}}</p>
        </div>
        </div>

        <form method="post" name="like">
            <button>Like <i class="fa fa-heart" aria-hidden="true"></i></button>
            <div class="error">{{error_likes}}</div>
            <div class="error">{{test_error}}</div>
        </form>

            
            <a href="/edit/{{post.key.integer_id()}}">Edit <i class="fa fa-pencil" aria-hidden="true"></i></a>
        
            <a href="/delete/{{post.key.integer_id()}}">Delete <i class="fa fa-trash-o" aria-hidden="true"></i></a>
        
        {# Logged in user section #}
        {% elif username != post.author %}

        <a href="/comment/{{post.key.integer_id()}}">Comment <i class="fa fa-comment" aria-hidden="true"></i></a>
        
        <div class="test">
        <p>this is a test to see what value the like query returns:</p>
        <br>
        <p>{{likes}}</p>
        <br>
        <p>Filter: {{likes.like_count}}</p>
        <br>
        <p>{{check_like}}</p>


        <form method="post" name="like">
            <button>Like <i class="fa fa-heart" aria-hidden="true"></i></button>
            <div class="error">{{error_likes}}</div>
            <div class="error">{{test_error}}</div>
        </form>

        {# visitor section #}
        {% else %}

        {% endif %}
    
    </div>

</div>

{% endblock content %}
